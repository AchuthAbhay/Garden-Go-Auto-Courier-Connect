{%extends 'base.html'%}
{%block title%}
Admin Dashboard
{%endblock%}

{%block content%}
<div class="container">
    <h1>{{user.name}}'s Dashboard</h1>

    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container-fluid">
        
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item">
                    <a class="nav-link active" href="{{ url_for('admin_dashboard') }}">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="{{ url_for('view_products') }}">Add new product</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="{{ url_for('admin_summary') }}">Summary</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="{{ url_for('logout') }}">Logout</a>
                    </li>
                    
                </ul>
                <form class="d-flex" action="{{ url_for('search_products') }}" method="GET" role="search">
                    <input class="form-control me-2" type="search" name="query" placeholder="Search products" aria-label="Search">
                    <button class="btn btn-outline-success" type="submit">Search</button>
                </form>
                </div>
        </div>
    </nav>
    <header>
        <h1>Our Products</h1>
      </header>
    
      <main>
        <div style="margin: 20px 0;">
            <a href="/add_product">
                <button style="padding: 10px 20px; font-size: 16px; background-color: #007BFF; color: white; border: none; border-radius: 5px; cursor: pointer;">
                    Add Product
                </button>
            </a>
        </div>
    
        {% if categories %}
            {% for category_name, products in categories.items() %}
                <section id="{{ category_name.lower().replace(' ', '-') }}" class="category-section">
                    <h2>{{ category_name }}</h2>
                    <div class="product-list" style="display: flex; flex-wrap: wrap; gap: 20px;">
                        {% for product in products %}
                            <div class="product-card" style="border: 1px solid #ccc; padding: 15px; border-radius: 5px; width: 200px; text-align: center;">
                                <img src="{{ product.image_url }}" alt="{{ product.name }}" class="product-image" style="width: 100%; height: auto; border-radius: 5px;">
                                <p class="product-title" style="font-weight: bold; margin: 10px 0;">{{ product.name }}</p>
                                <p class="product-price" style="color: #28a745;">Price: ${{ product.price }}</p>
                                <p class="product-stock" style="color: #dc3545;">Stock: {{ product.stock_quantity }}</p>
                                <a href="{{ url_for('view_product', product_id=product.id) }}" class="product-details-link" style="color: #007BFF; text-decoration: none;">
                                    View Details
                                </a>
                                <form action="{{ url_for('delete_product', product_id=product.id) }}" method="POST" style="margin-top: 10px;">
                                  <button type="submit" style="padding: 5px 10px; font-size: 14px; background-color: #dc3545; color: white; border: none; border-radius: 5px; cursor: pointer;">
                                      Delete Product
                                  </button>
                              </form>
                              <!-- <a href="{{ url_for('edit_product', product_id=product.id) }}"> -->
                              <a href="/edit_product/{{ product.id }}">
                                <button type="button" style="padding: 5px 10px; font-size: 14px; background-color: #ffc107; color: white; border: none; border-radius: 5px; cursor: pointer; margin-top: 10px;">
                                    Edit Product
                                </button>
                            </a>
                            </div>
                        {% endfor %}
                    </div>
                </section>
            {% endfor %}
        {% else %}
            <p>No categories available at the moment.</p>
        {% endif %}
    </main>
      
      
      <script src="{{ url_for('static', filename='js/script.js') }}"></script>

     
    
</div>
{% endblock %}
    